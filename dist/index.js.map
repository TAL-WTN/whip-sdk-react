{"version":3,"file":"index.js","sources":["../src/publish.ts","../src/index.ts"],"sourcesContent":["import { EventEmitter } from 'node:events';\n\nexport default class Publisher extends EventEmitter {\n  constructor(streamId: string, token: string, track: MediaStreamTrack, setState: (state: number) => void) {\n    super();\n    this.pc = new RTCPeerConnection();\n    this.streamId = streamId;\n    this.token = token;\n    this.track = track;\n    this.setState = setState;\n  }\n\n  pc: RTCPeerConnection;\n\n  streamId: string;\n\n  token: string;\n\n  track: MediaStreamTrack;\n\n  setState: (state: number) => void;\n}\n","import { useState } from 'react';\nimport Publisher from './publish';\n\nexport const useSubscribe = (streamId: string, token: string) => {\n  const [state, setState] = useState(0);\n\n  return new Publisher(streamId, token, new MediaStreamTrack(), setState);\n};\nexport const usePublish = (streamId: string, token: string, track: MediaStreamTrack) => {\n  const [state, setState] = useState(0);\n\n  return new Publisher(streamId, token, track, setState);\n}\n"],"names":["EventEmitter","useState"],"mappings":";;;;;AAEqB,MAAA,SAAU,SAAQA,wBAAY,CAAA;AACjD,IAAA,WAAA,CAAY,QAAgB,EAAE,KAAa,EAAE,KAAuB,EAAE,QAAiC,EAAA;AACrG,QAAA,KAAK,EAAE,CAAC;AACR,QAAA,IAAI,CAAC,EAAE,GAAG,IAAI,iBAAiB,EAAE,CAAC;AAClC,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACzB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACnB,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;KAC1B;AAWF;;MClBY,YAAY,GAAG,CAAC,QAAgB,EAAE,KAAa,KAAI;IAC9D,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAGC,cAAQ,CAAC,CAAC,CAAC,CAAC;AAEtC,IAAA,OAAO,IAAI,SAAS,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,gBAAgB,EAAE,EAAE,QAAQ,CAAC,CAAC;AAC1E,EAAE;AACW,MAAA,UAAU,GAAG,CAAC,QAAgB,EAAE,KAAa,EAAE,KAAuB,KAAI;IACrF,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAGA,cAAQ,CAAC,CAAC,CAAC,CAAC;IAEtC,OAAO,IAAI,SAAS,CAAC,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;AACzD;;;;;"}